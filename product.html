<!DOCTYPE html>
<html lang="mn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product Details</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="icon" type="image/png" href="image/logo.png">
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">

  <header class="bg-blue-600 text-white py-6 shadow-lg flex items-center sticky top-0 z-50 px-6">
    <button onclick="window.location.href='index.html'" 
            class="text-white text-lg hover:underline focus:outline-none absolute left-6">
      <i class="fa fa-arrow-left mr-2"></i>
      <span class="hidden md:inline">Буцах</span>
    </button>
    <h1 class="text-3xl font-bold tracking-wide mx-auto">Бүтээгдэхүүний дэлгэрэнгүй</h1>
  </header>

  <main class="container mx-auto px-4 py-10 md:py-16 flex flex-col lg:flex-row gap-8 lg:gap-12">

    <div class="w-full lg:w-1/2 bg-white rounded-2xl shadow-xl overflow-hidden p-6 flex justify-center items-center">
      <img id="productImg" src="" alt="Product" 
           class="w-3/4 sm:w-2/3 md:w-full h-96 sm:h-[28rem] md:h-[32rem] object-contain rounded-xl bg-gray-50 p-2 shadow-md">
    </div>

    <div class="w-full lg:w-1/2 bg-white rounded-2xl shadow-xl p-8 flex flex-col justify-start min-h-[28rem]">

      <div class="mb-6">
        <h1 id="productName" class="text-3xl font-bold text-gray-900 mb-4"></h1>
        <p id="productDescription" class="text-gray-700 text-lg leading-relaxed"></p>
      </div>

      <div class="mt-auto">
        <p id="productPrice" class="text-2xl font-semibold text-blue-600 mb-6"></p>
        <button id="addCartBtn"
          class="bg-blue-600 text-white font-semibold px-8 py-4 rounded-xl hover:bg-blue-700 transition shadow-lg">
          Сагсанд нэмэх
        </button>
      </div>
    </div>
  </main>

  <script src="cart.js"></script>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const productId = urlParams.get("id");

    async function loadProduct() {
      const res = await fetch("products.json");
      const products = await res.json();
      const product = products.find(p => p.id === String(productId));

      if (!product) {
        alert("Бүтээгдэхүүн олдсонгүй!");
        window.location.href = "index.html";
        return;
      }

      document.getElementById("productName").textContent = product.name;
      document.getElementById("productDescription").textContent = product.description;
      document.getElementById("productPrice").textContent = `$${product.price}`;
      document.getElementById("productImg").src = product.image;

      document.getElementById("addCartBtn").onclick = () => {
        addToCart(product);
        alert("Сагсанд нэмэгдлээ!");
      };
    }

    if (!productId) {
      alert("Бүтээгдэхүүн сонгогдоогүй байна!");
      window.location.href = "index.html";
    } else {
      loadProduct();
    }

    updateCartUI();
  </script>

</body>
</html>
